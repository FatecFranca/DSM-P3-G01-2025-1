generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model avaliacoes {
  id String @id @default(auto()) @map("_id") @db.ObjectId
}

model clientes {
  id          String    @id @default(auto()) @map("_id") @db.ObjectId
  nome        String
  email       String
  senha       String
  cpf         String
  logradouro  String
  num_casa    String
  complemento String
  bairro      String
  cidade      String
  uf          String
  cep         String
  celular     String

  pedidos     pedidos[]  
}

model livros {
  id          String    @id @default(auto()) @map("_id") @db.ObjectId
  titulo      String
  autor       String
  editora     String
  isbn        String
  ano         Int
  genero      String
  preco       Float
  quantidade  Int
  sinopse     String
  capa        String

  pedidos     pedidos[]  
}

model pedidos {
  id         String    @id @default(auto()) @map("_id") @db.ObjectId
  clienteId  String    @db.ObjectId
  cliente    clientes  @relation(fields: [clienteId], references: [id])
  itens      ItemPedido[]
  status     String    @default("pendente") // pendente, pago, enviado, entregue, cancelado
  metodoPagamento String
  total      Float
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
}

model ItemPedido {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  pedidoId  String   @db.ObjectId
  pedido    pedidos  @relation(fields: [pedidoId], references: [id])
  livroId   String   @db.ObjectId
  livro     livros   @relation(fields: [livroId], references: [id])
  quantidade Int
  precoUnitario Float
}
